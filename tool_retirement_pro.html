<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å°ˆæ¥­é€€ä¼‘è¦åŠƒåˆ†æï½œæ™º Financial Path</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial,sans-serif;margin:0;background:#f5f7fa;color:#333}
.nav{background:#fff;border-bottom:1px solid #e6e8ee;position:sticky;top:0}
.nav-inner{max-width:1100px;margin:auto;padding:14px 20px;display:flex;justify-content:space-between}
.brand{font-weight:bold;color:#0b3d91;text-decoration:none}
.links a{margin-left:15px;text-decoration:none;color:#333}
.container{max-width:1100px;margin:auto;padding:30px 20px}
.card{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 10px rgba(0,0,0,.05);margin-bottom:20px}
label{display:block;margin-top:10px;font-size:14px}
input{width:100%;padding:8px;border-radius:8px;border:1px solid #ccc}
button{margin-top:15px;background:#0b3d91;color:white;padding:10px 15px;border:none;border-radius:8px;cursor:pointer}
.result{margin-top:15px;background:#eef4ff;padding:15px;border-radius:10px}
canvas{margin-top:20px}
footer{text-align:center;margin-top:20px;color:#777;font-size:13px}
</style>
</head>
<body>

<nav class="nav">
  <div class="nav-inner">
    <a class="brand" href="./index.html">æ™º Financial Path</a>
    <div class="links">
      <a href="./tools.html">å·¥å…·</a>
      <a href="./library.html">çŸ¥è­˜åº«</a>
    </div>
  </div>
</nav>

<div class="container">

<h1>å°ˆæ¥­é€€ä¼‘è¦åŠƒåˆ†æå·¥å…·</h1>

<div class="card">
<h3>åŸºæœ¬è³‡æ–™</h3>

<label>é€€ä¼‘å¾Œæ¯å¹´ç”Ÿæ´»æ”¯å‡ºï¼ˆä»Šå¤©å¹£å€¼ï¼‰</label>
<input type="number" id="annualSpend" placeholder="ä¾‹ï¼š1800000">

<label>ç›®å‰å¹´é½¡</label>
<input type="number" id="currentAge" placeholder="ä¾‹ï¼š40">

<label>é è¨ˆé€€ä¼‘å¹´é½¡</label>
<input type="number" id="retireAge" placeholder="ä¾‹ï¼š65">

<label>é æœŸå£½å‘½</label>
<input type="number" id="lifeAge" placeholder="ä¾‹ï¼š90">

<label>é€šè†¨ç‡ï¼ˆ%ï¼‰</label>
<input type="number" id="inflation" value="2">

<h3>å‹ä¿å¹´é‡‘ä¼°ç®—ï¼ˆç°¡åŒ–æ•™è‚²ç‰ˆï¼‰</h3>

<label>å¹³å‡æŠ•ä¿è–ªè³‡ï¼ˆæœˆï¼‰</label>
<input type="number" id="salary" placeholder="ä¾‹ï¼š45800">

<label>æŠ•ä¿å¹´è³‡ï¼ˆå¹´ï¼‰</label>
<input type="number" id="years" placeholder="ä¾‹ï¼š35">

<label>å»¶å¾Œè«‹é ˜åŠ æˆï¼ˆ%ï¼‰</label>
<input type="number" id="delay" value="0">

<h3>è³‡ç”¢æ¨¡å¼</h3>

<label>å®‰å…¨æé ˜ç‡ï¼ˆ%ï¼‰</label>
<input type="number" id="withdrawRate" value="3.5">

<label>è¢«å‹•æ”¶ç›Šç‡ï¼ˆ%ï¼‰</label>
<input type="number" id="passiveRate" value="3.5">

<label>ç›®å‰å·²æº–å‚™é€€ä¼‘è³‡ç”¢</label>
<input type="number" id="currentAsset" placeholder="ä¾‹ï¼š12000000">

<button onclick="calculate()">é–‹å§‹åˆ†æ</button>

<div id="output" class="result" style="display:none"></div>

</div>

<canvas id="pieChart"></canvas>
<canvas id="barChart"></canvas>
<canvas id="cashflowChart"></canvas>

<footer>
æœ¬å·¥å…·ç‚ºæ•™è‚²ç”¨é€”ï¼Œå…¬å¼ç‚ºç°¡åŒ–ä¼°ç®—ï¼Œä¸æ§‹æˆæŠ•è³‡å»ºè­°ã€‚
</footer>

</div>

<script>
let pieChart, barChart, cashflowChart;

function calculate(){

const annualSpend = Number(document.getElementById("annualSpend").value);
const currentAge = Number(document.getElementById("currentAge").value);
const retireAge = Number(document.getElementById("retireAge").value);
const lifeAge = Number(document.getElementById("lifeAge").value);
const inflation = Number(document.getElementById("inflation").value)/100;

const salary = Number(document.getElementById("salary").value);
const years = Number(document.getElementById("years").value);
const delay = Number(document.getElementById("delay").value)/100;

const withdrawRate = Number(document.getElementById("withdrawRate").value)/100;
const passiveRate = Number(document.getElementById("passiveRate").value)/100;
const currentAsset = Number(document.getElementById("currentAsset").value);

const yearsToRetire = retireAge - currentAge;
const retirementYears = lifeAge - retireAge;

// å‹ä¿ç°¡åŒ–å…¬å¼
let pension1 = salary * years * 0.0155;
let pension2 = salary * years * 0.013 + 3000;
let monthlyPension = Math.max(pension1, pension2);
monthlyPension = monthlyPension * (1 + delay);
let annualPension = monthlyPension * 12;

// é€šè†¨å¾Œé€€ä¼‘æ”¯å‡º
let inflatedSpend = annualSpend * Math.pow(1+inflation, yearsToRetire);

// å¹´ç¼ºå£
let annualGap = Math.max(0, inflatedSpend - annualPension);

// è³‡ç”¢éœ€æ±‚
let needWithdraw = annualGap / withdrawRate;
let needPassive = annualGap / passiveRate;

// å£“åŠ›æ¸¬è©¦ï¼ˆ-20%ï¼‰
let stressAsset = currentAsset * 0.8;
let yearsSupport = stressAsset / annualGap;

// ----------- è©•åˆ†ç³»çµ± -----------
let score = 0;

// å‹ä¿å æ¯”
let pensionRatio = annualPension / inflatedSpend;
if(pensionRatio >= 0.3) score += 20;

// ç¼ºå£æ¯”ä¾‹
let gapRatio = annualGap / inflatedSpend;
if(gapRatio <= 0.4) score += 20;

// ç”Ÿç”¢åŠ›å„ªå‹¢
if(needPassive < needWithdraw * 0.9) score += 20;

// å£“åŠ›æ¸¬è©¦å®‰å…¨
if(yearsSupport >= retirementYears) score += 20;

// è³‡ç”¢é”æ¨™åº¦
if(currentAsset >= needWithdraw*0.7) score += 20;

if(score>100) score=100;

// è©•ç´šé¡è‰²
let level, color;
if(score>=75){level="ç©©å¥"; color="green";}
else if(score>=50){level="å¯æ”¹å–„"; color="orange";}
else{level="é¢¨éšªåé«˜"; color="red";}

// é¡§å•å¼è§£è®€
let advice="";
if(gapRatio>0.5){
advice+="ç›®å‰é€€ä¼‘ç¼ºå£æ¯”ä¾‹åé«˜ï¼Œå»ºè­°å„ªå…ˆå„ªåŒ–è³‡ç”¢ç”Ÿç”¢èƒ½åŠ›æˆ–å»¶å¾Œé€€ä¼‘å¹´é½¡ã€‚<br>";
}
if(pensionRatio<0.2){
advice+="å‹ä¿ä½”æ¯”åä½ï¼Œå¯è©•ä¼°æ˜¯å¦å»¶å¾Œè«‹é ˜ä»¥æå‡ä¿éšœã€‚<br>";
}
if(needWithdraw>needPassive*1.2){
advice+="å–®ç´”æé ˜æ¨¡å¼å£“åŠ›è¼ƒå¤§ï¼Œæé«˜è¢«å‹•æ”¶ç›Šèƒ½åŠ›å°‡é¡¯è‘—æ”¹å–„é€€ä¼‘çµæ§‹ã€‚<br>";
}
if(yearsSupport<retirementYears){
advice+="å£“åŠ›æ¸¬è©¦é¡¯ç¤ºå¸‚å ´æ³¢å‹•å¯èƒ½å½±éŸ¿é€€ä¼‘ç©©å®šåº¦ï¼Œéœ€ä¿ç•™å®‰å…¨ç·©è¡ã€‚<br>";
}

let output = document.getElementById("output");
output.style.display="block";
output.innerHTML = `
<h3>ğŸ“Š é€€ä¼‘è¨ºæ–·å ±å‘Š</h3>
é€€ä¼‘æ™‚å¹´æ”¯å‡ºï¼ˆé€šè†¨å¾Œï¼‰ï¼š${Math.round(inflatedSpend).toLocaleString()}<br>
å‹ä¿å¹´é‡‘ï¼š${Math.round(annualPension).toLocaleString()}<br>
å¹´åº¦ç¼ºå£ï¼š${Math.round(annualGap).toLocaleString()}<br><br>

æé ˜æ¨¡å¼éœ€æ±‚è³‡ç”¢ï¼š${Math.round(needWithdraw).toLocaleString()}<br>
è¢«å‹•æ”¶ç›Šæ¨¡å¼éœ€æ±‚è³‡ç”¢ï¼š${Math.round(needPassive).toLocaleString()}<br><br>

å£“åŠ›æ¸¬è©¦ï¼ˆ-20%ï¼‰ï¼šå¯æ”¯æ’ ${Math.floor(yearsSupport)} å¹´<br><br>

<h3>é€€ä¼‘æº–å‚™åº¦ï¼š${score}/100</h3>
<div style="background:#eee;border-radius:8px;width:100%;height:18px;">
<div style="width:${score}%;background:${color};height:18px;border-radius:8px;"></div>
</div>
<strong style="color:${color}">${level}</strong><br><br>

<h4>é¡§å•å»ºè­°</h4>
${advice}

<hr>
ğŸ‘‰ æƒ³å–å¾—å®Œæ•´å€‹äººåŒ–åˆ†æè·¯å¾‘ï¼Ÿ<br>
è«‹åŠ å…¥ LINE ä¸¦è¼¸å…¥ã€Œé€€ä¼‘åˆ†æã€<br>
<a href="https://lin.ee/yvD5Vu8" target="_blank">åŠ å…¥ LINE</a>
`;

}
</script>


</body>
</html>
